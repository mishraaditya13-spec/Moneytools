<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MoneyTools â€“ Earn with Calculators</title>
  <style>
    :root{--bg:#0f172a;--card:#111827;--muted:#93a3b8;--text:#e5e7eb;--accent:#22c55e;--danger:#ef4444;--brand:#10b981;--chip:#1f2937;}
    *{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;background:var(--bg);color:var(--text)}
    .wrap{max-width:900px;margin:0 auto;padding:16px}
    .header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;margin:0 -16px 12px;border-radius:0 0 18px 18px;background:#059669}
    .title{font-size:24px;font-weight:800;line-height:1.1}
    .subtitle{font-size:12px;opacity:.9;margin-top:6px}
    .badge{display:inline-flex;align-items:center;gap:8px;font-weight:700}
    .btn{appearance:none;border:0;cursor:pointer;border-radius:14px;padding:10px 16px;font-weight:700}
    .btn-alt{background:#60a5fa;color:#0b1220}
    .btn-ghost{background:#1f2937;color:#e5e7eb}
    .btn-success{background:var(--accent);color:#0b1220}
    .btn-danger{background:var(--danger);color:#fff}
    .card{background:var(--card);border-radius:18px;padding:16px;margin:14px 0;box-shadow:0 10px 20px rgba(0,0,0,.2)}
    .card h2{margin:0 0 12px;font-size:20px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .row-1{grid-template-columns:1fr}
    label{font-size:12px;color:var(--muted)} input,textarea,select{width:100%;background:#0b1220;border:1px solid #263247;border-radius:12px;color:var(--text);padding:12px;font-size:15px}
    .result{margin-top:10px;padding:10px;border:1px dashed #334155;border-radius:12px;color:#a7f3d0;background:#064e3b20}
    .chip{background:var(--chip);color:#e5e7eb;font-size:12px;border-radius:999px;padding:6px 10px}
    .right{float:right}
    .list{display:flex;flex-direction:column;gap:10px}
    .aff a{color:#a5b4fc;text-decoration:none}
    .muted{color:var(--muted);font-size:12px}
    /* modal */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;place-items:center;padding:16px;z-index:50}
    .modal.show{display:grid}
    .sheet{width:100%;max-width:720px;background:#0b1220;border:1px solid #1e293b;border-radius:22px;padding:16px}
    .sheet h3{margin:0 0 12px}
    .sheet .row{grid-template-columns:1fr 1fr}
    @media (max-width:640px){.row{grid-template-columns:1fr}.sheet .row{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="header">
    <div>
      <div class="badge">ðŸ’° <span id="siteTitle">MoneyTools â€“ Earn with Calculators</span></div>
      <div class="subtitle">Mobile-first â€¢ SEO-friendly â€¢ Monetize via Ads, Affiliates & Leads</div>
    </div>
    <button id="settingsBtn" class="btn btn-alt">Settings</button>
  </div>

  <div class="wrap">

    <!-- EMI -->
    <div class="card">
      <h2>EMI Calculator <span class="chip right">Finance</span></h2>
      <div class="row">
        <div><label>Loan Amount</label><input id="emiAmt" placeholder="e.g. 300000" inputmode="decimal"></div>
        <div><label>Interest (annual %)</label><input id="emiRate" placeholder="e.g. 10" inputmode="decimal"></div>
        <div><label>Tenure (months)</label><input id="emiMonths" placeholder="e.g. 36" inputmode="numeric"></div>
        <div><label>Processing Fee % (optional)</label><input id="emiFee" placeholder="e.g. 1.5" inputmode="decimal"></div>
      </div>
      <div style="margin-top:10px;display:flex;gap:10px">
        <button class="btn btn-success" onclick="calcEMI()">Calculate</button>
        <button class="btn btn-danger" onclick="resetEMI()">Clear</button>
      </div>
      <div id="emiResult" class="result">Enter values above to see results.</div>
    </div>

    <!-- SIP -->
    <div class="card">
      <h2>SIP Calculator <span class="chip right">Invest</span></h2>
      <div class="row">
        <div><label>Monthly Investment</label><input id="sipAmt" placeholder="e.g. 10000" inputmode="decimal"></div>
        <div><label>Expected Return (annual %)</label><input id="sipRate" placeholder="e.g. 12" inputmode="decimal"></div>
        <div><label>Years</label><input id="sipYears" placeholder="e.g. 10" inputmode="numeric"></div>
        <div><label>Step-up % per year (optional)</label><input id="sipStep" placeholder="e.g. 5" inputmode="decimal"></div>
      </div>
      <div style="margin-top:10px;display:flex;gap:10px">
        <button class="btn btn-success" onclick="calcSIP()">Calculate</button>
        <button class="btn btn-danger" onclick="resetSIP()">Clear</button>
      </div>
      <div id="sipResult" class="result">Enter values above to see results.</div>
    </div>

    <!-- Discount -->
    <div class="card">
      <h2>Discount Calculator</h2>
      <div class="row">
        <div><label>Original Price</label><input id="discPrice" placeholder="e.g. 999" inputmode="decimal"></div>
        <div><label>Discount %</label><input id="discPct" placeholder="e.g. 20" inputmode="decimal"></div>
      </div>
      <div style="margin-top:10px;display:flex;gap:10px">
        <button class="btn btn-success" onclick="calcDisc()">Calculate</button>
        <button class="btn btn-danger" onclick="resetDisc()">Clear</button>
      </div>
      <div id="discResult" class="result">Enter values above to see results.</div>
    </div>

    <!-- Profit Margin -->
    <div class="card">
      <h2>Profit & Margin</h2>
      <div class="row">
        <div><label>Cost Price</label><input id="pmCost" placeholder="e.g. 80" inputmode="decimal"></div>
        <div><label>Selling Price</label><input id="pmSell" placeholder="e.g. 100" inputmode="decimal"></div>
      </div>
      <div style="margin-top:10px;display:flex;gap:10px">
        <button class="btn btn-success" onclick="calcPM()">Calculate</button>
        <button class="btn btn-danger" onclick="resetPM()">Clear</button>
      </div>
      <div id="pmResult" class="result">Enter values above to see results.</div>
    </div>

    <!-- Invoice CSV (simple) -->
    <div class="card">
      <h2>Invoice (CSV)</h2>
      <div class="row">
        <div><label>Item</label><input id="invItem" placeholder="e.g. Mouse"></div>
        <div><label>Amount</label><input id="invAmt" placeholder="e.g. 499" inputmode="decimal"></div>
      </div>
      <div style="margin-top:10px;display:flex;gap:10px">
        <button class="btn btn-success" onclick="addInv()">Add</button>
        <button class="btn btn-ghost" onclick="clearInv()">Clear</button>
        <button class="btn btn-alt" onclick="downloadCSV()">Download CSV</button>
      </div>
      <div id="invList" class="result">No items yet.</div>
    </div>

    <!-- WhatsApp lead -->
    <div class="card">
      <h2>WhatsApp Lead</h2>
      <div class="row">
        <div><label>Name</label><input id="leadName" placeholder="Customer name"></div>
        <div><label>Service</label><input id="leadService" placeholder="Loan / SIP / EMI help"></div>
        <div class="row-1"><label>Message</label><input id="leadMsg" placeholder="Your message"></div>
      </div>
      <div style="margin-top:10px">
        <button class="btn btn-success" onclick="sendWhatsApp()">Send on WhatsApp</button>
        <span class="muted" style="margin-left:8px">WhatsApp number is private (stored only in your browser).</span>
      </div>
    </div>

    <!-- Affiliate links -->
    <div class="card aff">
      <h2>Top Affiliate Picks</h2>
      <div id="affList" class="list muted">Add links in Settings â†’ Save.</div>
    </div>

    <!-- Custom HTML (AdSense etc.) -->
    <div id="customHTML" class="card"></div>

    <div class="muted" style="text-align:center;margin:16px 0;">
      Â© <span id="year"></span> MoneyTools. SEO-friendly & mobile-first single-file app.
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="sheet">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <h3>Settings</h3>
        <button class="btn btn-ghost" onclick="closeModal()">Close</button>
      </div>

      <div class="row">
        <div>
          <label>Your WhatsApp Number (with country code, no +)</label>
          <input id="sPhone" placeholder="e.g. 9715XXXXXXXX" inputmode="numeric">
        </div>
        <div>
          <label>Site Title</label>
          <input id="sTitle" placeholder="MoneyTools â€“ Earn with Calculators">
        </div>
      </div>

      <div style="margin-top:10px">
        <label>Affiliate Links (one per line, format: Label | https://your-link)</label>
        <textarea id="sAff" rows="5" placeholder="Amazon Best Laptops | https://amzn.to/xxxx"></textarea>
      </div>

      <div style="margin-top:10px">
        <label>Custom HTML (e.g., AdSense code)</label>
        <textarea id="sHTML" rows="5" placeholder="&lt;script&gt;/* your ad code */&lt;/script&gt;"></textarea>
      </div>

      <div style="display:flex;gap:10px;margin-top:14px">
        <button class="btn btn-success" onclick="saveSettings()">Save</button>
        <button class="btn btn-danger" onclick="resetSettings()">Reset</button>
        <span class="muted" style="align-self:center">Settings are stored locally in your browser (LocalStorage).</span>
      </div>
    </div>
  </div>

  <script>
    // ---------- tiny helpers ----------
    const $ = (q) => document.querySelector(q);
    const $$ = (q) => Array.from(document.querySelectorAll(q));
    const key = 'mt_settings_v1';

    const getSettings = () => {
      try { return JSON.parse(localStorage.getItem(key) || '{}'); }
      catch { return {}; }
    };
    const setSettings = (obj) => localStorage.setItem(key, JSON.stringify(obj||{}));

    function openModal(){ $('#modal').classList.add('show'); fillForm(); }
    function closeModal(){ $('#modal').classList.remove('show'); }
    $('#year').textContent = new Date().getFullYear();

    // ---------- Settings fill/save ----------
    function fillForm(){
      const s = getSettings();
      $('#sPhone').value = s.phone || '';
      $('#sTitle').value = s.title || '';
      $('#sAff').value   = (s.affiliates||[]).map(a=>`${a.label} | ${a.url}`).join('\n');
      $('#sHTML').value  = s.customHTML || '';
    }
    function saveSettings(){
      const lines = ($('#sAff').value||'').split('\n').map(x=>x.trim()).filter(Boolean);
      const affiliates = lines.map(l=>{
        const [label,url] = l.split('|').map(x=>x.trim());
        return label && url ? {label,url} : null;
      }).filter(Boolean);
      setSettings({
        phone: ($('#sPhone').value||'').replace(/[^\d]+/g,''),
        title: $('#sTitle').value || '',
        affiliates,
        customHTML: $('#sHTML').value || ''
      });
      renderAll();
      alert('Saved locally on this device.');
      closeModal();
    }
    function resetSettings(){ localStorage.removeItem(key); renderAll(); fillForm(); }

    // ---------- Renderers ----------
    function renderTitle(){
      const s = getSettings();
      const t = s.title && s.title.trim() ? s.title.trim() : 'MoneyTools â€“ Earn with Calculators';
      document.title = t; $('#siteTitle').textContent = t;
    }
    function renderAffiliates(){
      const box = $('#affList'); const s = getSettings(); const arr = s.affiliates||[];
      if(!arr.length){ box.innerHTML = '<span class="muted">Add links in Settings â†’ Save.</span>'; return; }
      box.innerHTML = arr.map(a=>`<div>â€¢ <a href="${a.url}" target="_blank" rel="nofollow noopener">${a.label}</a></div>`).join('');
    }
    function renderCustomHTML(){
      const s = getSettings(); const html = s.customHTML || '';
      $('#customHTML').innerHTML = html;
    }
    function renderAll(){ renderTitle(); renderAffiliates(); renderCustomHTML(); }

    // ---------- Calculators ----------
    function calcEMI(){
      const P = parseFloat($('#emiAmt').value)||0;
      const annual = parseFloat($('#emiRate').value)||0;
      const n = parseInt($('#emiMonths').value)||0;
      const feePct = parseFloat($('#emiFee').value)||0;
      if(P<=0 || annual<=0 || n<=0){ $('#emiResult').innerHTML='Please enter valid values.'; return; }
      const r = (annual/12)/100;
      const emi = P*r*Math.pow(1+r,n) / (Math.pow(1+r,n)-1);
      const total = emi*n;
      const interest = total - P;
      const fee = P*(feePct/100);
      $('#emiResult').innerHTML = `<b>EMI:</b> â‚¹${emi.toFixed(2)} &nbsp; â€¢ &nbsp; <b>Total Interest:</b> â‚¹${interest.toFixed(2)} &nbsp; â€¢ &nbsp; <b>Total Payment:</b> â‚¹${total.toFixed(2)} ${feePct?`&nbsp; â€¢ &nbsp; <b>Processing Fee:</b> â‚¹${fee.toFixed(2)}`:''}`;
    }
    function resetEMI(){ ['emiAmt','emiRate','emiMonths','emiFee'].forEach(id=>$('#'+id).value=''); $('#emiResult').innerHTML='Enter values above to see results.'; }

    function calcSIP(){
      const m0 = parseFloat($('#sipAmt').value)||0;
      const rYear = parseFloat($('#sipRate').value)||0;
      const years = parseInt($('#sipYears').value)||0;
      const step = parseFloat($('#sipStep').value)||0;
      if(m0<=0 || rYear<=0 || years<=0){ $('#sipResult').innerHTML='Please enter valid values.'; return; }
      const r = rYear/12/100; let totalInvested=0, value=0, m=m0;
      for(let y=1;y<=years;y++){
        for(let i=0;i<12;i++){ value = (value + m)*(1+r); totalInvested += m; }
        m = m * (1 + step/100);
      }
      const gain = value - totalInvested;
      $('#sipResult').innerHTML = `<b>Future Value:</b> â‚¹${value.toFixed(2)} &nbsp; â€¢ &nbsp; <b>Invested:</b> â‚¹${totalInvested.toFixed(2)} &nbsp; â€¢ &nbsp; <b>Gain:</b> â‚¹${gain.toFixed(2)}`;
    }
    function resetSIP(){ ['sipAmt','sipRate','sipYears','sipStep'].forEach(id=>$('#'+id).value=''); $('#sipResult').innerHTML='Enter values above to see results.'; }

    function calcDisc(){
      const price = parseFloat($('#discPrice').value)||0;
      const pct = parseFloat($('#discPct').value)||0;
      if(price<=0 || pct<0){ $('#discResult').innerHTML='Please enter valid values.'; return; }
      const off = price * (pct/100), final = price - off;
      $('#discResult').innerHTML = `<b>You save:</b> â‚¹${off.toFixed(2)} &nbsp; â€¢ &nbsp; <b>Final price:</b> â‚¹${final.toFixed(2)}`;
    }
    function resetDisc(){ ['discPrice','discPct'].forEach(id=>$('#'+id).value=''); $('#discResult').innerHTML='Enter values above to see results.'; }

    function calcPM(){
      const cost = parseFloat($('#pmCost').value)||0;
      const sell = parseFloat($('#pmSell').value)||0;
      if(cost<=0 || sell<=0){ $('#pmResult').innerHTML='Please enter valid values.'; return; }
      const profit = sell - cost;
      const margin = profit / sell * 100;
      const markup = profit / cost * 100;
      $('#pmResult').innerHTML = `<b>Profit:</b> â‚¹${profit.toFixed(2)} &nbsp; â€¢ &nbsp; <b>Margin:</b> ${margin.toFixed(2)}% &nbsp; â€¢ &nbsp; <b>Markup:</b> ${markup.toFixed(2)}%`;
    }
    function resetPM(){ ['pmCost','pmSell'].forEach(id=>$('#'+id).value=''); $('#pmResult').innerHTML='Enter values above to see results.'; }

    // Invoice
    const inv=[]; function addInv(){ const item=$('#invItem').value.trim(); const amt=parseFloat($('#invAmt').value)||0; if(!item||!amt){alert('Enter item and amount');return;} inv.push({item,amt}); $('#invItem').value=''; $('#invAmt').value=''; renderInv(); }
    function renderInv(){ if(!inv.length){ $('#invList').innerHTML='No items yet.'; return; } const total=inv.reduce((a,b)=>a+b.amt,0); $('#invList').innerHTML = inv.map((x,i)=>`${i+1}. ${x.item} â€” â‚¹${x.amt.toFixed(2)}`).join('<br>') + `<br><br><b>Total:</b> â‚¹${total.toFixed(2)}`; }
    function clearInv(){ inv.splice(0,inv.length); renderInv(); }
    function downloadCSV(){ if(!inv.length){alert('No items to export');return;} const rows=[['Item','Amount'],...inv.map(x=>[x.item,x.amt])]; const csv=rows.map(r=>r.map(v=>`"${String(v).replace(/"/g,'""')}"`).join(',')).join('\n'); const blob=new Blob([csv],{type:'text/csv'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='invoice.csv'; a.click(); URL.revokeObjectURL(a.href); }

    // WhatsApp
    function sendWhatsApp(){
      const s = getSettings(); const phone=(s.phone||'').replace(/[^\d]+/g,'');
      if(!phone){ alert('Add your WhatsApp number in Settings'); return; }
      const name=encodeURIComponent($('#leadName').value.trim());
      const service=encodeURIComponent($('#leadService').value.trim());
      const msg=encodeURIComponent($('#leadMsg').value.trim());
      const text = `Hello, I need a quote.%0AName: ${name}%0AService: ${service}%0AMessage: ${msg}`;
      window.open(`https://wa.me/${phone}?text=${text}`,'_blank');
    }

    // Init
    function init(){ renderAll(); }
    init();

    // Modal button (visibility controlled below)
    $('#settingsBtn').addEventListener('click', openModal);

    // ---------- HIDE settings unless admin=1 ----------
    document.addEventListener('DOMContentLoaded', function(){
      const params = new URLSearchParams(window.location.search);
      const isAdmin = params.get('admin') === '1';
      const btn = document.querySelector('#settingsBtn');
      if(btn && !isAdmin){ btn.style.display='none'; }
    });
  </script>
</body>
</html>
